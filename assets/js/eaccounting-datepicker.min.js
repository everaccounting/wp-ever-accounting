jQuery(document).ready(function(i) {
	var n = { altFormat: 'yy-mm-dd' };
	i('input.ea-date-control').each(function() {
		var t = i('<input />', { type: 'hidden', name: i(this).attr('name') }).insertAfter(i(this));
		if (
			(i(this).attr('name', i(this).attr('name') + '-datepicker'),
			i(this).keyup(function() {
				'' === i(this).val() && t.val('');
			}),
			i(this).datepicker(i.extend({}, n, { altField: t })),
			i(this).val())
		) {
			var e = i(this)
				.val()
				.split('-');
			if (3 === e.length) {
				var a = new Date(parseInt(e[0], 10), parseInt(e[1], 10) - 1, parseInt(e[2], 10));
				i(this).datepicker('setDate', a);
			}
		}
	});
});
