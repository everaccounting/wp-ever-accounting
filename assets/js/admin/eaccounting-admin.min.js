!function(n,t){n(function(){void 0!==t&&(n(document).ajaxStart(function(){Pace.restart()}),n.extend(n.validator.messages,{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")}),n.validator.setDefaults({errorElement:"span",errorClass:"description error"}),n.validator.addMethod("currency_rate",function(e,a){return this.optional(a)||!/[^\d.]+/g.test(e)},"numbers, and dot only please"),window.eaccounting.currency_form={validate:function(){n("#ea-currency-form").validate({rules:{rate:{required:!0,currency_rate:!0,normalizer:function(e){return n.trim(e)}}}})},handleSubmit:function(e){e.preventDefault();var a=n(this);a.blockThis(),wp.ajax.post(a.serializeArray()).then(function(e){e=n.extend(!0,{},{message:"",redirect:""},e),console.log(e),a.unblock(),n.eaccounting_notice(e.message,"success"),eaccounting.redirect(e.redirect)}).fail(function(e){console.log(e),a.unblock(),n.eaccounting_notice(e.message,"error")})},init:function(){this.validate(),n(document).on("ready",function(){n("#ea-currency-form #code").select2(),n("#ea-currency-form #position").select2()}).on("select2:select","#ea-currency-form #code",function(e){var a=e.params.data;if(""===a.id)return!1;try{currency=t.global_currencies[a.id],n("#ea-currency-form #precision").val(currency.precision).change(),n("#ea-currency-form #position").val(currency.position).change(),n("#ea-currency-form #symbol").val(currency.symbol).change(),n("#ea-currency-form #decimal_separator").val(currency.decimal_separator).change(),n("#ea-currency-form #thousand_separator").val(currency.thousand_separator).change()}catch(e){console.log(e.message)}}).on("submit","#ea-currency-form",this.handleSubmit)}},eaccounting.currency_form.init(),n(document).on("click",".wp-list-table .ea_item_status_update",function(){var e=n(this).data("objectid"),a=n(this).data("nonce"),t=n(this).is(":checked")?1:0,r=n(this).data("objecttype");if(!e||!a||!r)return n.eaccounting_notice("Item Missing some important property","error"),!1;wp.ajax.post("eaccounting_item_status_update",{objectid:e,nonce:a,enabled:t,objecttype:r}).then(function(e){e=n.extend(!0,{},{message:"",redirect:""},e),n.eaccounting_notice(e.message,"success")}).fail(function(e){n.eaccounting_notice(e.message,"error")})}).on("click",function(){n(".ea-dropdown").removeClass("open"),console.log("body")}).on("click",".ea-dropdown-button",function(e){e.preventDefault(),e.stopPropagation(),n(".ea-dropdown").removeClass("open"),n(this).closest(".ea-dropdown").toggleClass("open")}))})}(jQuery,eaccounting_admin_i10n);