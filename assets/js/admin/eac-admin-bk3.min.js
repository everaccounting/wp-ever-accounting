!function(i,e){"use strict";({init:function(){i(e).on("click",".eac-dropdown__button",this.toggle_dropdown).on("click",".del",this.handle_delete).on("keyup change",".eac_input_decimal",this.input_decimal).on("block","form.eac-ajax-form",this.block_form).on("unblock","form.eac-ajax-form",this.unblock_form).on("submit","form.eac-ajax-form",this.submit_form).on("init-select2",this.init_select2).on("init-tooltip",this.init_tooltip).on("init-datepicker",this.init_datepicker).on("eac_drawer_ready",this.triggerEvents).on("ready",this.triggerEvents)},toggle_dropdown:function(t){t.preventDefault(),t.stopPropagation(),i(this).closest(".eac-dropdown").toggleClass("is--open"),i(e).on("click",function(){i(".eac-dropdown").removeClass("is--open")})},handle_delete:function(t){if(!confirm(eac_admin_vars.i18n.delete_confirmation))return t.preventDefault(),!1},input_decimal:function(){var t=(t=i(this).val()).replace(/[^0-9.]/g,"");i(this).val(t)},block_form:function(){var t=i(this);i('[form="'+t.attr("id")+'"]').attr("disabled","disabled"),t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock_form:function(){var t=i(this);i('[form="'+t.attr("id")+'"]').removeAttr("disabled"),t.unblock()},submit_form:function(t){t.preventDefault();var e=i(this),t=e.serializeAssoc();i('[form="'+e.attr("id")+'"]').is(":disabled")||(e.trigger("block"),i.post(eac_admin_vars.ajax_url,t,function(t){t.success&&(e.closest(".eac-drawer").length?e.closest(".eac-drawer").data("eac_drawer").close():i.eac_redirect(t))}).always(function(t){e.trigger("unblock"),i.eac_notification(t)}))},init_select2:function(){i(":input.eac_select2").filter(":not(.enhanced)").each(function(){var t={allowClear:i(this).data("allow_clear")&&!i(this).prop("multiple")||!0,placeholder:i(this).data("placeholder")||i(this).attr("placeholder")||"",minimumInputLength:i(this).data("minimum_input_length")?i(this).data("minimum_input_length"):0,ajax:{url:eac_admin_vars.ajax_url,dataType:"json",delay:250,method:"POST",data:function(t){return{term:t.term,action:i(this).data("action"),type:i(this).data("type"),_wpnonce:eac_admin_vars.search_nonce,exclude:i(this).data("exclude"),include:i(this).data("include"),limit:i(this).data("limit")}},processResults:function(t){return t.page=t.page||1,t},cache:!0}};i(this).data("action")||delete t.ajax,i(this).closest(".eac-form").length&&(t.dropdownParent=i(this).closest(".eac-form")),i(this).select2(t).addClass("enhanced"),i(".ea-select2").select2(t)})},init_tooltip:function(){i(".eac-tooltip").tooltip({tooltipClass:"eac-ui-tooltip",position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:{duration:200},show:{duration:200}})},init_datepicker:function(){i(".eac-field-date").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-100:+0"}),i("#eac_financial_year_start").datepicker({dateFormat:"mm-dd",changeMonth:!0,changeYear:!1,yearRange:"-100:+0"})},triggerEvents:function(){i(e).trigger("init-select2"),i(e).trigger("init-tooltip"),i(e).trigger("init-datepicker")}}).init()}(jQuery,(window,document));