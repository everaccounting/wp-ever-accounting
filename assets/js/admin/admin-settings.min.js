jQuery( document ).ready( function ( a ) {
	var n;
	( window.formfield = '' ),
		a( 'body' ).on( 'click', '.ea_settings_upload_button', function ( e ) {
			e.preventDefault();
			var t = a( this );
			( window.formfield = a( this ).parent().prev() ),
				n ||
					( ( n = wp.media.frames.file_frame = wp.media( {
						frame: 'post',
						state: 'insert',
						title: t.data( 'uploader_title' ),
						button: { text: t.data( 'uploader_button_text' ) },
						multiple: ! 1,
					} ) ).on( 'menu:render:default', function ( e ) {
						e.unset( 'library-separator' ),
							e.unset( 'gallery' ),
							e.unset( 'featured-image' ),
							e.unset( 'embed' ),
							e.set( {} );
					} ),
					n.on( 'insert', function () {
						n.state()
							.get( 'selection' )
							.each( function ( e, t ) {
								( e = e.toJSON() ),
									window.formfield.val( e.url );
							} );
					} ) ),
				n.open();
		} ),
		a( '.ea-financial-start' ).datepicker( 'destroy' ),
		a( '.ea-financial-start' ).datepicker( { dateFormat: 'dd-mm' } );
} );
