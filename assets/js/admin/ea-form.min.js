!function(n){var e=Backbone.View.extend({events:{submit:"onSubmit","change select#account_id":"onAccountChange","change select#currency_code":"onCurrencyChange"},initialize:function(){this.currency=n("#currency_code",this.$el),this.account=n("#account_id",this.$el),this.amount=n("#amount, #opening_balance",this.$el),_.bindAll(this,"onSubmit","onAccountChange","onCurrencyChange","maskAmount")},block:function(){this.$el.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){this.$el.unblock()},maskAmount:function(n){this.amount.inputmask("decimal",{alias:"numeric",groupSeparator:n.thousand_separator,autoGroup:!0,digits:n.precision,radixPoint:n.decimal_separator,digitsOptional:!1,allowMinus:!1,prefix:n.symbol,placeholder:"0.000",rightAlign:0})},getCurrency:function(n,e,t){wp.ajax.send("eaccounting_get_currency",{data:{code:t},success:n,error:e})},getAccount:function(n,e,t){wp.ajax.send("eaccounting_get_account",{data:{id:n},success:e,error:t})},onAccountChange:function(){var e,n=parseInt(this.account.val(),10);n&&((e=this).block(),this.getAccount(n,function(n){e.getCurrency(n.currency_code,e.maskAmount,e.unblock)},e.unblock))},onCurrencyChange:function(){var n,e;this.amount.length&&(n=this.currency.val(),(e=this).block(),wp.ajax.send("eaccounting_get_currency",{data:{code:n},success:function(n){e.unblock(),e.amount.inputmask("decimal",{alias:"numeric",groupSeparator:n.thousand_separator,autoGroup:!0,digits:n.precision,radixPoint:n.decimal_separator,digitsOptional:!1,allowMinus:!1,prefix:n.symbol,placeholder:"0.000",rightAlign:0})},error:function(n){e.unblock()}}))},onSubmit:function(n){n.preventDefault(),this.$el.closest("#tab_container").prepend('<div class="notice updated"><p>lorem ipsum dolor sit amet</p></div>');var e=this.$el.serializeArray();console.log(e)}});jQuery(document).ready(function(){n('.select2-results__option:contains("2413")').css("color","red"),new e({el:"#ea-account-form, #ea-revenue-form"})})}(jQuery);