!function(n){var c=Backbone.View.extend({events:{submit:"onSubmit","change select#account_id":"onAccountChange","change select#currency_code":"onCurrencyChange"},initialize:function(){this.currency=n("#currency_code",this.$el),this.account=n("#account_id",this.$el),this.amount=n("#amount, #opening_balance",this.$el),_.bindAll(this,"onSubmit","onAccountChange","onCurrencyChange","maskAmount","unblock")},block:function(){this.$el.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){this.$el.unblock()},maskAmount:function(n){this.amount.inputmask("decimal",{alias:"numeric",groupSeparator:n.thousand_separator,autoGroup:!0,digits:n.precision,radixPoint:n.decimal_separator,digitsOptional:!1,allowMinus:!1,prefix:n.symbol,placeholder:"0.000",rightAlign:0})},getCurrency:function(n,c,e){wp.ajax.send("eaccounting_get_currency",{data:{code:n},success:c,error:e})},getAccount:function(n,c,e){wp.ajax.send("eaccounting_get_account",{data:{id:n},success:c,error:e})},onAccountChange:function(){var c,n=parseInt(this.account.val(),10);n&&((c=this).block(),this.getAccount(n,function(n){c.getCurrency(n.currency_code,c.maskAmount,c.unblock),c.unblock()},c.unblock))},onCurrencyChange:function(){var n,c;this.amount.length&&(n=this.currency.val(),(c=this).block(),c.getCurrency(n,c.maskAmount,c.unblock),c.unblock())},onSubmit:function(n){n.preventDefault();var c=this.$el.serializeArray();console.log(c)}});jQuery(document).ready(function(){new c({el:"#ea-account-form, #ea-revenue-form"})})}(jQuery);