jQuery(function(o){o.fn.eaccounting_creatable=function(n){return this.each(function(){new o.eaccounting_creatable(this,n)})};var e={option:function(n){return{id:n.id,text:n.name}},template:undefined,onReady:undefined,onSubmit:undefined};o.eaccounting_creatable=function(n,t){this.el=n,this.$el=o(n),this.options=o.extend({},e,t);var i=this;return this.handleSubmit=function(e){var n=eaccounting.get_values(o("form",e.$modal));if("function"==typeof i.options.onSubmit)return i.options.onSubmit(i.$el,n,e);o.post(ajaxurl,n).always(function(n){var t;e.unblock(),n.success&&(t=i.options.option(n.data.item),i.$el.eaccounting_select2({data:[t]}),i.$el.val(t.id).trigger("change"),e.close()),eaccounting.notice(n)})},this.handleModal=function(n,t,e){n.preventDefault(),t.is(i.$el)&&o(e).ea_modal({onSubmit:i.handleSubmit,onReady:function(n){"function"==typeof i.options.onReady&&i.options.onReady(i.$el,n,i)}})},this.init=function(){o(document).on("ea_trigger_creatable",i.handleModal)},this.init(),this},o("#account_id,#customer_id,#vendor_id").eaccounting_creatable()});