jQuery(function(n){n.fn.eaccounting_select2=function(e){return this.each(function(){new n.eaccounting_select2(this,e)})},n.eaccounting_select2=function(e,t){this.el=e,this.$el=n(e),this.placeholder=this.$el.attr("placeholder"),this.template=this.$el.attr("data-template"),this.nonce=this.$el.attr("data-nonce"),this.type=this.$el.attr("data-type"),this.creatable_text=this.$el.attr("data-text"),this.creatable=this.$el.is("[data-creatable]"),this.creatable=!0===this.creatable,this.ajax=this.$el.is("[data-ajax]"),this.ajax=!0===this.ajax,this.id=this.$el.attr("id"),!this.ajax||this.type&&this.nonce||(console.warn("ajax type defined without nonce and data type"),this.ajax=!1),this.creatable&&!this.template&&(console.warn("modal type defined without template"),this.creatable=!1);var s=this,a={};a.placeholder=this.placeholder,a.allowClear=!1,this.ajax&&(a.ajax={cache:!0,delay:500,url:eaccounting_select_i10n.ajaxurl,method:"POST",dataType:"json",data:function(e){return{action:"eaccounting_dropdown_search",nonce:s.nonce,type:s.type,search:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.results,pagination:{more:e.pagination.more}}}});var l=n.extend({},a,t);return this.$el.select2(l),this.creatable&&s.template&&this.$el.on("select2:open",function(e){var t,a=n("#select2-"+s.id+"-results").closest(".select2-results");a.children(".ea-select2-footer").length||(t=n('<a href="#" class="ea-select2-footer"><span class="dashicons dashicons-plus"></span>'+s.creatable_text+"</a>").on("click",function(e){e.preventDefault(),s.$el.select2("close"),console.log(s.template),n(document).trigger("ea_trigger_creatable",[s.$el,s.template])}),a.append(t))}),this.$el},n(".ea-select2").eaccounting_select2()});