jQuery(function(o){o.fn.eaccounting_select2=function(e){return this.each(function(){new o.eaccounting_select2(this,o.extend({},o(this).data(),e))})},o.eaccounting_select2=function(e,t){this.el=e,this.$el=o(e),this.options=t,this.id=this.$el.attr("id");var s=this;return t.ajax_action&&(t.ajax={cache:!0,delay:500,url:t.url,method:"POST",dataType:"json",data:function(e){return{action:s.options.ajax_action,nonce:s.options.nonce,search:e.term,page:e.page}},processResults:function(e,t){t.page=t.page||1;var t=s.options.map||"return {text: option.name, id:option.id}",n=new Function("option",t);return{results:e.data.map(function(e){return n(e)}),pagination:!1}}}),this.$el.select2(t),this.options.modal_id&&this.$el.on("select2:open",function(e){var t,n=o(this).data("select2").$results;n.siblings(".ea-select2-footer").length||(t=o('<a href="#" class="ea-select2-footer"><span class="dashicons dashicons-plus">&nbsp;</span>'+s.options.add_text+"</a>").on("click",function(e){e.preventDefault(),s.$el.select2("close"),o(s.options.modal_id).ea_modal()}),n.closest(".select2-results").append(t))}),this.$el},o(document.body).on("ea_select2_init",function(){o(".ea-select2").filter(":not(.select2-hidden-accessible)").each(function(){o(this).eaccounting_select2()})}),o(".ea-select2").eaccounting_select2()});