!(function(a, e, n, t, o) {
	var r = {
		renderExpenseByCategories: function() {
			var e = a(this).val(),
				n = a(this).data('nonce');
			a.ajax({
				url: ajaxurl,
				data: { action: 'eaccounting_get_expense_by_category_chart', period: e, nonce: n },
				success: function(e) {
					e.success && r.renderDoughnutChart('ea-expense-by-categories', e.data);
				},
				error: function(e) {
					console.log(e);
				},
			});
		},
		renderIncomeByCategories: function() {
			var e = a(this).val(),
				n = a(this).data('nonce');
			a.ajax({
				url: ajaxurl,
				data: { action: 'eaccounting_get_income_by_category_chart', period: e, nonce: n },
				success: function(e) {
					e.success && r.renderDoughnutChart('ea-income-by-categories', e.data);
				},
				error: function(e) {
					console.log(e);
				},
			});
		},
		renderDoughnutChart: function(e, n) {
			var a = t.getElementById(e);
			new Chart(a, {
				type: 'doughnut',
				data: { labels: n.labels, datasets: [{ data: n.data, backgroundColor: n.background_color }] },
				options: {
					responsive: !0,
					maintainAspectRatio: !1,
					legend: { display: !0, fullWidth: !0, position: 'right' },
					tooltips: {
						callbacks: {
							label: function(e, n) {
								var a = n.datasets[e.datasetIndex].data,
									t = n.labels[e.index],
									o = a[e.index],
									r = 0,
									i = t.split(' - ');
								for (var c in a) r += a[c];
								var s = Math.round((o / r) * 100);
								return i[1] + ': ' + i[0] + ' (' + s + '%)';
							},
						},
					},
				},
			});
		},
		init: function() {
			var e = a('#expense-by-category-filter'),
				n = a('#income-by-category-filter');
			e.on('change', this.renderExpenseByCategories),
				e.trigger('change'),
				n.on('change', this.renderIncomeByCategories),
				n.trigger('change');
		},
	};
	t.addEventListener('DOMContentLoaded', function() {
		r.init();
	});
})(jQuery, window, window.wp, document, undefined);
